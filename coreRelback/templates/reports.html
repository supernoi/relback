{% extends 'base.html' %}

{% load static %}

{% block title %} relBack - Reports{% endblock %}

{% block content %}

    <div class="container container-fluid">
        <h1>Report Backup Policy</h1>
        
        <div class="panel panel-default" >        
                <table class="table table-striped table-responsive display" id="myTable" >
                    <thead>
                        <tr>
                            <th class="text-center" scope="col">Policy</th>
                            <th class="text-center" scope="col">Hostname</th>
                            <th class="text-center" scope="col">DB_NAME</th>				
                            <th class="text-center" scope="col">Expected<br>Start</th>
                            <th class="text-center" scope="col">Start<br>Realized</th>
                            <th class="text-center" scope="col">Executed<br>Time</th>
                            <th class="text-center" scope="col">Status</th>				
                            <th class="text-center" scope="col">Destination</th>	
                            <th class="text-center" scope="col">Backup<br>Type</th>						
                            <th class="text-center" scope="col">Details</th>
                        </tr>
                    </thead>

                    <tfoot>
                        <tr>
                            <!-- space reserved for select-filter -->
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                            <th></th>
                        </tr>
                    </tfoot>

                    <tbody>
                    {% for report in report.items %}    
                        {% if report.status == 'COMPLETED' %}
                            {{ trStyle | default:'success' }}
                        {% elif report.status == 'SCHEDULED')
                            {{ trStyle | default:'info' }}				
                        {% elif report.status == 'NOT RUN')
                            {{ trStyle | default:'danger' }}							
                        {% elif report.status == 'RUNNING') 
                            {{ trStyle | default:'active' }}
                        {% elif report.status == 'COMPLETED WITH WARNINGS') 
                            {{ trStyle | default:'warning' }}
                        {% elif report.status == 'FAILED') 
                            {{ trStyle | default:'danger' }}
                        {% endif %}

                        <tr class="{{ trStyle }}" style="font-size:12px">
                        
                            <td class="text-center" scope="col" > {{ report.id_policy }} </td>
                            <td class="text-center" scope="col" > {{ report.hostname }} </td>
                            <td class="text-center" scope="col" > {{ report.db_name }} </td>
                            <td class="text-center" scope="col" > {{ report.schedule_start }} </td>
                            <td class="text-center" scope="col" > {{ report.start_r }} </td>							
                            <td class="text-center" scope="col" > {{ report.duration_r }} </td>
                            <td class="text-center" scope="col" > {{ report.status }} </td>
                            <td class="text-center" scope="col" > {{ report.destination }} </td>
                            <td class="text-center" scope="col" > {{ report.backup_type }} </td>

                            <td class="text-center" scope="col">

                                {% if report.session_key %}
                                    <a class="glyphicon glyphicon-eye-open" href="{% url 'coreRelback:index' %}" />
                                {% else %}
                                    <span class="glyphicon glyphicon-eye-close" />
                                {% endif %}									
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
                
            </div>	
        </div>
    </div>
        
    <!-- modify select-filter of botton to top table -->
    <style type="text/css">
        tfoot {
            display: table-header-group;
        }
    </style>

{% endblock %}